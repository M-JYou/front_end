{#layout name="public/freelance/freelance_layout" /#} {#load href="__ROOT__/assets/css/freelance/resume.css" /#}
<div class="list_container clearfix" id="app">
  <div class="lc_left">
    <!--搜索-->
    <div class="is_box">
      <label><input type="text" placeholder="请输入关键词" class="is_input" @keyup.enter="handlerSearch" v-model="keyword" /></label>
      <div class="is_btn" @click="handlerSearch">搜 索</div>
    </div>
    <div class="vo_group">
      {#if condition="count($pager->items()) gt 0"#} {#volist name="$pager->items()" id="item"#}
      <div class="vo_list">
        <img src="{#$item.avatar_img#}" alt="{#$item.name#}" class="ava_img" />
        <p class="vo_name"><a href="{#:url('index/freelance/resume_show',['id'=>$item.resume_id])#}" target="_blank">{#$item.name#}</a></p>
        <p class="vo_ot">{#$item.gender_str#} · {#$item.exp_str#} · {#$item.education#}</p>
        <p class="vo_sk"> 提供服务：{#$item.professional_title#} </p>
        <a href="{#:url('index/freelance/resume_show',['id'=>$item.resume_id])#}" target="_blank" class="vo_btn">查看详情</a>
      </div>
      {#/volist#} {#else#}
      <div class="list_empty">
        <div class="emp_text">暂时没有数据哦</div>
      </div>
      {#/if#}
    </div>
    {#$pager->render()#}
  </div>
  <div class="lc_right">
    <div class="r1">
      <div class="link_btn" @click="handlerLink(1)">发布零工项目</div>
      <div class="link_btn d" @click="handlerLink(2)">登记信息赚钱</div>
    </div>
    <div class="r2">
      <p class="t1">使用微信扫一扫</p><p class="t2">查看更多内容</p>
      <img :src="rightQrcode" alt="微信扫一扫" class="qr_img" />
    </div>
    {#if condition="count($hot) gt 0"#}
    <div class="r3">
      <div class="p_title">
        <div class="t_cn">热门专业人士</div>
      </div>
      <div class="r3_group">
        {#volist name="hot" id="item"#}
        <a href="{#:url('index/freelance/resume_show',['id'=>$item.resume_id])#}" target="_blank" class="r3_item">
          <div class="i1">
            <img src="{#$item.avatar_img#}" alt="" class="ava_img" />
            <p class="i_name">{#$item.name#}</p>
            <p class="i_ot substring">{#$item.gender_str#} · {#$item.exp_str#} · {#$item.education#}</p>
          </div>
          <p class="i2 substring">服务：{#$item.professional_title#}</p>
        </a>
        {#/volist#}
      </div>
    </div>
    {#/if#}
  </div>
</div>
<script>
  var vm = new Vue({
    el: "#app",
    data: {
      keyword: "",
      searchAlias: "resume",
      rightQrcode: "",
    },
    created: function () {
      var locationUrl = "{#$share_url#}";
      this.rightQrcode = qscms.apiUrl + qscms.apiList.qrcode + "?alias=sub_fl_resume_list&url=" + locationUrl;
      this.keyword = decodeURI(this.getQueryVariable("keyword"));
    },
    methods: {
      handlerSearch: function () {
        if (this.keyword) {
          location.href = window.location.origin + window.location.pathname + "?keyword=" + this.keyword;
        } else {
          location.href = window.location.origin + window.location.pathname;
        }
      },
      handlerLink: function (type) {
        if (parseInt(type) === 1) {
          location.href = qscms.locationList.freelanceAddSubject;
        } else {
          location.href = qscms.locationList.freelanceAddResume;
        }
      },
      getQueryVariable: function (variable) {
        var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i = 0; i < vars.length; i++) {
          var pair = vars[i].split("=");
          if (pair[0] === variable) {
            return pair[1];
          }
        }
        return "";
      },
    },
  });
</script>
