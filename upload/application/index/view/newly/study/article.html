{#layout name="public/layout" /#}
{#load href="__ROOT__/assets/css/logoLayout.css" /#}
{#load href="__ROOT__/assets/css/article.css" /#}
<div class="wapper_content" id="app">
    <!-- #region -->
    <div class="logoPart">
        <div class="logo">
            <img src="/assets/images/home/logo_xiazi.png" alt="">
            <span>打造财税生态链</span>
        </div>
        <div class="search">
            <div class="search-input">
                <div>
                    <i class="el-icon-search"></i>
                    <input type="text" v-mordel="input" placeholder="请输入关键字">
                </div>
                <button>搜索</button>
            </div>
        </div>
        <div class="release">
            <p><img src="/assets/images/home/myWord.png" alt=""><a href="">我的学习</a></p>
        </div>
    </div>
    <div class="main">
        <div class="top">
            <el-breadcrumb separator-class="el-icon-arrow-right">
                <el-breadcrumb-item><a href="/">籽虾云平台</a></el-breadcrumb-item>
                <el-breadcrumb-item>免费学习</el-breadcrumb-item>
            </el-breadcrumb>
            <div class="tabs">
                <span v-for="(i,ii) in type" :key="ii" :class="{active:itemIndex==i.id}" @click="clickTab(i.id)">{{i.name}}</span>
            </div>
        </div>
        <div class="mainContent">
            <div class="nav">
                <h2>免费学习</h2>
                <span><a href="/study/video">视频</a></span>
                <span class="current"><a href="/study/article">图文</a></span>

            </div>
            <div class="formContent">
                <div class="item" v-for="(item, index) in listData" ::key="index">
                    <div class="videoTop" @click="toDetails(item.id)"><img :src="item.cover" alt=""></div>
                    <div class="videoBtm">
                        <h2 @click="toDetails(item.id)">{{item.name}}</h2>
                        <p @click="toDetails(item.id)">{{item.content}}</p>
                        <div>
                            <div class="study_num"><i class="el-icon-view"></i><span>{{item.history}}人学习</span></div>
                            <button @click="toDetails(item.id)">马上学习</button>
                        </div>
                        <div class="operation">
                            <div><img src="/assets/images/home/operation_01.png" alt="">转发23</div>
                            <div><img src="/assets/images/home/operation_02.png" alt="">举报26</div>
                            <div><img src="/assets/images/home/operation_03.png" alt="">点赞15</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    var app = new Vue({
        el: '#app',
        data() {
            return {
                input: '',
                itemIndex: 0,
                listData:[],
                type:[],
            }
        },
        async created() {
            const t=await httppost('member/study/type');
            this.type=t.data;
            if(t.data.length){
                this.itemIndex=t.data[0].id;
            }
            this.getArticleList()
        },
        methods: {
            clickTab(index) {
                this.itemIndex = index
                this.getArticleList();
            },
            async getArticleList(){
               const {data}= await httppost('member/study/index',{is_caishui:1,type:this.itemIndex});
               this.listData=data;
            },
            toDetails(id){
                location.href = `/study/articleDetails/${id}.html`;
            }


           
        }
    })

</script>