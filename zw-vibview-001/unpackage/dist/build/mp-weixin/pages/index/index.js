(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"0635":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e("26cb"),a=(c(e("7379")),e("70eb"));function c(t){return t&&t.__esModule?t:{default:t}}function i(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,o)}return e}function r(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?i(Object(e),!0).forEach((function(n){s(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function s(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var u=function(){e.e("components/share/index").then(function(){return resolve(e("f47d"))}.bind(null,e)).catch(e.oe)},d={components:{share:u},data:function(){return{names:"",codes:"",nameed:"",codeed:"",runList:[],getrunList:[],accounted:"",cacheListed:{},dangerCounts:"",disConnectCounts:"",alarmCounts:"",noticeCounts:"",data:[],abnorNuber:[],type:0,chartData:{},opts:{color:["#2fc25b","#AC13DB","#e65050","#E29E09","#EAF60D","#3CA272","#FC8452","#9A60B4","#ea7ccc"],fontColor:"#AFDDFF",padding:[5,5,5,5],legend:{show:!0,position:"left",lineHeight:25},extra:{rose:{type:"radius",minRadius:50,activeOpacity:.5,activeRadius:5,offsetAngle:-135,labelWidth:6,border:!0,borderWidth:.5,borderColor:"#AFDDFF"}}},lists:[{icons:"../../static/logo/logo5.png"},{icons:"../../static/logo/logo3.png"},{icons:"../../static/logo/logo8.png"},{icons:"../../static/logo/logo4.png"},{icons:"../../static/logo/logo1.png"},{icons:"../../static/logo/logo2.png"},{icons:"../../static/logo/logo6.png"},{icons:"../../static/logo/logo9.png"},{icons:"../../static/logo/logo7.png"}],is_follow:!1,shareData:{},equipmentInfoList:[{name:"正常设备",state:0,count:0,conutBgColor:"#2fc25b"},{name:"网络异常",state:5,count:0,conutBgColor:"#BB0FF0"},{name:"危险设备",state:3,count:0,conutBgColor:"#e65050"},{name:"报警设备",state:2,count:0,conutBgColor:"orange"},{name:"预警设备",state:1,count:0,conutBgColor:"#E4F008"}]}},computed:r({},(0,o.mapGetters)(["active"])),created:function(){},onLoad:function(){},onUnload:function(){},onHide:function(){},onShow:function(){var n=t.getStorageSync("token");n?(this.fetchDataList(),this.abnorList(),this.getServerData()):t.navigateTo({url:"../login/index"})},onReady:function(){this.abnorList(),this.getServerData()},methods:r(r({},(0,o.mapMutations)(["SET_ACTIVE"])),{},{fetchDataList:function(){var n=this,e=this,o=t.getStorageSync("account");(0,a.projectList)({account:o}).then((function(t){200===t.statusCode&&(e.lists=t.data,n.accounted=o,e.lists=e.lists.map((function(t){return n.codes=t.code,n.names=t.name,t.icon=n.iconUrl+"/src"+t.icon,t})),n.getdeviceFists(n.codes),n.getdeviceList(n.codes))}))},getdeviceFists:function(t){var n=this;(0,a.deviceitemsList)(t).then((function(t){200==t.statusCode&&(n.runList=t.data)}))},getdeviceList:function(t){var n=this;(0,a.deviceList)(t).then((function(t){200==t.statusCode&&(n.getrunList=t.data)}))},abnorList:function(){var n=this,e=this,o=t.getStorageSync("account");(0,a.AbnormaList)({account:o}).then((function(t){200===t.statusCode&&(e.abnorNuber=t.data,e.equipmentInfoList.map((function(t){switch(t.state){case 0:t.count=e.abnorNuber.normalCount;break;case 5:t.count=e.abnorNuber.disConnectCount;break;case 3:t.count=e.abnorNuber.dangerCount;break;case 2:t.count=e.abnorNuber.alarmCount;break;case 1:t.count=e.abnorNuber.noticeCount;break}})),n.dangerCounts=e.abnorNuber.dangerCount,n.disConnectCounts=e.abnorNuber.disConnectCount,n.alarmCounts=e.abnorNuber.alarmCount,n.noticeCounts=e.abnorNuber.noticeCount)}))},getServerData:function(){var n=this,e=t.getStorageSync("account");(0,a.AbnormaList)({account:e}).then((function(t){var e=[{name:"正常("+t.data.normalCount+"台)",value:t.data.normalCount},{value:t.data.disConnectCount,name:"网络("+t.data.disConnectCount+"台)"},{value:t.data.dangerCount,name:"危险("+t.data.dangerCount+"台)"},{value:t.data.alarmCount,name:"报警("+t.data.alarmCount+"台)"},{value:t.data.noticeCount,name:"预警("+t.data.noticeCount+"台)"}];200===t.statusCode&&setTimeout((function(){var t={series:[{data:e}]};n.chartData=JSON.parse(JSON.stringify(t))}),500)}))},goPolice:function(n,e,o,a,c){if(e=this.dangerCounts,o=this.disConnectCounts,a=this.alarmCounts,c=this.noticeCounts,0===n)return!1;(0!==c||1!==n)&&(0!==a||2!==n)&&(0!==e||3!==n)&&(0!==o||5!==n)?t.navigateTo({url:"/pages/police/index?state=".concat(n)}):t.showModal({title:"暂无数据"})},toDetialPage:function(n,e){(0,a.nodeitmList)(n,e).then((function(o){console.log(o,33),200==o.statusCode&&(""==o.data||1==o.data.length?t.navigateTo({url:"/pages/deviceListfist/index?code=".concat(n,"&name=").concat(e)}):t.navigateTo({url:"/pages/deviceList/index?code=".concat(n,"&name=").concat(e)}))}))},goDetialPages:function(n){var e=n.code,o=n.name,a=this.code;console.log(a,3),console.log(e,4),t.navigateTo({url:"/pages/projectDevie/index?code=".concat(e,"&name=").concat(o,"&itemcode=").concat(a)})},goListfist:function(n){var e=n.code,o=n.name,a=this.code;console.log(a,3),console.log(e,4),t.navigateTo({url:"/pages/deviceListfist/index?code=".concat(e,"&name=").concat(o)})}})};n.default=d}).call(this,e("543d")["default"])},"34b7":function(t,n,e){"use strict";e.r(n);var o=e("85b5"),a=e("8e5a");for(var c in a)"default"!==c&&function(t){e.d(n,t,(function(){return a[t]}))}(c);e("c725");var i,r=e("f0c5"),s=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"7d26a3a7",null,!1,o["a"],i);n["default"]=s.exports},"3b5e":function(t,n,e){},"85b5":function(t,n,e){"use strict";e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return c})),e.d(n,"a",(function(){return o}));var o={qiunDataCharts:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/qiun-data-charts/components/qiun-data-charts/qiun-data-charts")]).then(e.bind(null,"ea88"))},pageTabpars:function(){return e.e("components/page-tabpars/page-tabpars").then(e.bind(null,"315f"))}},a=function(){var t=this,n=t.$createElement;t._self._c},c=[]},"8e5a":function(t,n,e){"use strict";e.r(n);var o=e("0635"),a=e.n(o);for(var c in o)"default"!==c&&function(t){e.d(n,t,(function(){return o[t]}))}(c);n["default"]=a.a},c725:function(t,n,e){"use strict";var o=e("3b5e"),a=e.n(o);a.a},f631:function(t,n,e){"use strict";(function(t){e("aa96"),e("5c17");o(e("66fd"));var n=o(e("34b7"));function o(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(n.default)}).call(this,e("543d")["createPage"])}},[["f631","common/runtime","common/vendor"]]]);